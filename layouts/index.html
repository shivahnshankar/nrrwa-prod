{{ define "main" }}
<!-- Hero Slider -->
{{ $slides := index .Site.Data.heroSlides .Language.Lang }}
<div class="swiper hero-swiper">
  <div class="swiper-wrapper">
    {{ range $slides }}
    <div class="swiper-slide">
      {{ $img := resources.Get .image }}
      {{ if $img }}
        {{ $resized := $img.Resize "1920x webp q85" }}
        <img src="{{ $resized.RelPermalink }}" alt="{{ .title }}">
      {{ else }}
        <img src="{{ .image }}" alt="{{ .title }}">
      {{ end }}
      <div class="slide-content">
        <h2>{{ .title }}</h2>
        <p>{{ .description }}</p>
        <a href="{{ .buttonLink }}" class="cta-button">{{ .buttonText }}</a>
      </div>
    </div>
    {{ end }}
  </div>
  <div class="swiper-pagination"></div>
  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>
</div>

<!-- Upcoming Events -->
<section>
  <div class="container">
    <h2 class="section-title">{{ if eq .Language.Lang "en" }}Upcoming Events{{ else }}‡≤Æ‡≥Å‡≤Ç‡≤¨‡≤∞‡≥Å‡≤µ ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∞‡≤Æ‡≤ó‡≤≥‡≥Å{{ end }}</h2>
    <div class="cards-grid">
      {{ $now := now }}
      {{ $events := where .Site.RegularPages "Section" "events" }}
      {{ $events = where $events ".Language.Lang" .Language.Lang }}
      {{ $futureEvents := slice }}
      {{ range $events }}
        {{ $eventDate := .Params.eventDate }}
        {{ if $eventDate }}
          {{ $eventTime := time $eventDate }}
          {{ if gt $eventTime $now }}
            {{ $futureEvents = $futureEvents | append . }}
          {{ end }}
        {{ end }}
      {{ end }}
      {{ range first 3 $futureEvents }}
        <div class="card">
          {{ with .Params.featuredImage }}
            {{ $img := resources.Get . }}
            {{ if $img }}
              {{ $resized := $img.Fill "600x400 webp q85" }}
              <img src="{{ $resized.RelPermalink }}" alt="{{ $.Title }}">
            {{ else }}
              <img src="{{ . }}" alt="{{ $.Title }}">
            {{ end }}
          {{ end }}
          <div class="card-content">
            <div class="blog-meta">
              <span>üìÖ {{ time .Params.eventDate | dateFormat "02 Jan 2006" }}</span>
            </div>
            <h3>{{ .Title }}</h3>
            <p>{{ .Params.summary }}</p>
            <a href="{{ .Permalink }}" class="card-link">{{ if eq $.Language.Lang "en" }}Read More{{ else }}‡≤á‡≤®‡≥ç‡≤®‡≤∑‡≥ç‡≤ü‡≥Å ‡≤ì‡≤¶‡≤ø{{ end }} ‚Üí</a>
          </div>
        </div>
      {{ end }}
    </div>
    <div class="text-center mt-4">
      <a href="{{ "/events/" | relLangURL }}" class="cta-button">{{ if eq .Language.Lang "en" }}View All Events{{ else }}‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∞‡≤Æ‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤µ‡≥Ä‡≤ï‡≥ç‡≤∑‡≤ø‡≤∏‡≤ø{{ end }}</a>
    </div>
  </div>
</section>

<!-- Recent News -->
<section>
  <div class="container">
    <h2 class="section-title">{{ if eq .Language.Lang "en" }}Latest News{{ else }}‡≤á‡≤§‡≥ç‡≤§‡≥Ä‡≤ö‡≤ø‡≤® ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø{{ end }}</h2>
    <div class="blog-grid">
      {{ $news := where .Site.RegularPages "Section" "news" }}
      {{ $news := where $news ".Language.Lang" .Language.Lang }}
      {{ $news = where $news "Params.layout" "!=" "archive" }}
      {{ $news := first 3 $news }}
      {{ range $news }}
        <div class="blog-card">
          {{ with .Params.featuredImage }}
            {{ $img := resources.Get . }}
            {{ if $img }}
              {{ $resized := $img.Fill "600x400 webp q85" }}
              <img src="{{ $resized.RelPermalink }}" alt="{{ $.Title }}">
            {{ else }}
              <img src="{{ . }}" alt="{{ $.Title }}">
            {{ end }}
          {{ end }}
          <div class="blog-card-content">
            <div class="blog-meta">
              <span>üìÖ {{ .Date.Format "02 Jan 2006" }}</span>
            </div>
            <h3>{{ .Title }}</h3>
            <p>{{ .Params.summary }}</p>
            <a href="{{ .Permalink }}" class="card-link">{{ if eq $.Language.Lang "en" }}Read More{{ else }}‡≤á‡≤®‡≥ç‡≤®‡≤∑‡≥ç‡≤ü‡≥Å ‡≤ì‡≤¶‡≤ø{{ end }} ‚Üí</a>
          </div>
        </div>
      {{ end }}
    </div>
    <div class="text-center mt-4">
      <a href="{{ "/news/" | relLangURL }}" class="cta-button">{{ if eq .Language.Lang "en" }}View All News{{ else }}‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤µ‡≥Ä‡≤ï‡≥ç‡≤∑‡≤ø‡≤∏‡≤ø{{ end }}</a>
    </div>
  </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
  <div class="container">
    <div class="stats-grid">
      <div class="stat-item">
        <h3 class="stat-number" data-target="{{ .Site.Params.stats_members }}">0</h3>
        <p>{{ if eq .Language.Lang "en" }}Active Members{{ else }}‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø ‡≤∏‡≤¶‡≤∏‡≥ç‡≤Ø‡≤∞‡≥Å{{ end }}</p>
      </div>
      <div class="stat-item">
        <h3 class="stat-number" data-target="{{ .Site.Params.stats_yearsOfService }}">0</h3>
        <p>{{ if eq .Language.Lang "en" }}Years of Service{{ else }}‡≤∏‡≥á‡≤µ‡≥Ü‡≤Ø ‡≤µ‡≤∞‡≥ç‡≤∑‡≤ó‡≤≥‡≥Å{{ end }}</p>
      </div>
      <div class="stat-item">
        <h3 class="stat-number" data-target="{{ .Site.Params.stats_eventsOrganized }}">0</h3>
        <p>{{ if eq .Language.Lang "en" }}Events Organized{{ else }}‡≤Ü‡≤Ø‡≥ã‡≤ú‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø‡≤ï‡≥ç‡≤∞‡≤Æ‡≤ó‡≤≥‡≥Å{{ end }}</p>
      </div>
      <div class="stat-item">
        <h3 class="stat-number" data-target="{{ .Site.Params.stats_treesPlanted }}">0</h3>
        <p>{{ if eq .Language.Lang "en" }}Trees Planted{{ else }}‡≤®‡≥Ü‡≤ü‡≥ç‡≤ü ‡≤Æ‡≤∞‡≤ó‡≤≥‡≥Å{{ end }}</p>
      </div>
    </div>
  </div>
</section>

<!-- New Members -->
<section>
  <div class="container">
    {{ $members := index .Site.Data.members .Language.Lang }}
    {{ $sortedMembers := sort $members "joinedDate" "desc" }}
    <h2 class="section-title">{{ if eq .Language.Lang "en" }}Welcome New Members{{ else }}‡≤π‡≥ä‡≤∏ ‡≤∏‡≤¶‡≤∏‡≥ç‡≤Ø‡≤∞‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤µ‡≤æ‡≤ó‡≤§‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥á‡≤µ‡≥Ü{{ end }}</h2>
    <div class="cards-grid">
      {{ range first 3 $sortedMembers }}
      <div class="card member-card">
        <div class="member-photo">
          {{ if .photo }}
          {{ $img := resources.Get .photo }}
          {{ if $img }}
            {{ $resized := $img.Fill "200x200 webp q85" }}
            <img src="{{ $resized.RelPermalink }}" alt="{{ .name }}">
          {{ else }}
            <img src="{{ .photo }}" alt="{{ .name }}">
          {{ end }}
          {{ else }}
          <div class="photo-placeholder">üë§</div>
          {{ end }}
        </div>
        <div class="card-content text-center">
          <h3>{{ .name }}</h3>
          <p class="member-type">{{ .membershipType }} {{ if eq $.Language.Lang "en" }}Member{{ else }}‡≤∏‡≤¶‡≤∏‡≥ç‡≤Ø{{ end }}</p>
          <p class="member-date">{{ if eq $.Language.Lang "en" }}Joined{{ else }}‡≤∏‡≥á‡≤∞‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤∞‡≥Ü{{ end }}: {{ .joinedDate }}</p>
        </div>
      </div>
      {{ end }}
    </div>

    <div class="text-center mt-4">
      <p style="font-size: 1.1rem; color: var(--text-color);">
        {{ if eq .Language.Lang "en" }}
          Join our growing community of {{ len $members }} members!
        {{ else }}
          ‡≤®‡≤Æ‡≥ç‡≤Æ {{ len $members }} ‡≤∏‡≤¶‡≤∏‡≥ç‡≤Ø‡≤∞ ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≥Å‡≤µ ‡≤∏‡≤Æ‡≥Å‡≤¶‡≤æ‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤∏‡≥á‡≤∞‡≤ø!
        {{ end }}
      </p>
      <a href="/{{ .Language.Lang }}/membership/" class="cta-button" style="margin-top: 1rem;">{{ if eq .Language.Lang "en" }}Become a Member{{ else }}‡≤∏‡≤¶‡≤∏‡≥ç‡≤Ø‡≤∞‡≤æ‡≤ó‡≤ø{{ end }}</a>
    </div>
  </div>
</section>
{{ end }}
