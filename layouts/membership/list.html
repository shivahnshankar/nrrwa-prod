{{ define "main" }}
{{ $data := index .Site.Data.membership .Language.Lang }}

<div class="container">
  <h1 class="section-title">{{ .Title }}</h1>

  <div class="post-content" style="max-width: 900px; margin: 0 auto;">
    {{ .Content }}
  </div>

  <!-- Benefits Section -->
  <section style="margin: 4rem 0;">
    <h2 class="section-title">
      {{ T "membership_benefits" }}
    </h2>
    <div class="cards-grid"
      style="grid-template-columns: repeat(3, 1fr); gap: 1.5rem; max-width: 1200px; margin: 0 auto;">
      {{ range $data.benefits }}
      <div class="card" style="text-align: center; padding: 2rem;">
        <div class="card-icon">{{ .icon }}</div>
        <h3 style="color: var(--primary-green); margin-bottom: 0.75rem; font-style: italic;">{{ .title }}</h3>
        <p style="color: var(--color-text-secondary); line-height: 1.6;">{{ .description }}</p>
      </div>
      {{ end }}
    </div>
  </section>

  <!-- Membership Cards Section -->
  <section style="margin: 4rem 0;">
    <h2 class="section-subtitle" style="text-align: center; margin-bottom: 3rem;">
      {{ T "choose_membership" }}
    </h2>

    <div class="cards-grid"
      style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 1100px; margin: 0 auto;">
      {{ range $data.types }}
      <div class="membership-card{{ if .popular }} popular{{ end }}">
        {{ if .popular }}
        <div class="popular-badge">{{ T "most_popular" }}</div>
        {{ end }}
        <div class="membership-icon">{{ .icon }}</div>
        <h3 class="membership-name">{{ .name }}</h3>
        <div class="membership-price">
          <span class="price">{{ .price }}</span>
          <span class="period">{{ .period }}</span>
        </div>
        <ul class="membership-features">
          {{ range .features }}
          <li>‚úì {{ . }}</li>
          {{ end }}
        </ul>
        <a href="/{{ $.Language.Lang }}/contact/" class="membership-button">{{ T "join_now" }}</a>
      </div>
      {{ end }}
    </div>
  </section>

  <!-- Membership Form Download Section -->
  <section style="margin: 4rem 0; text-align: center; padding: 3rem; background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%); border-radius: 15px;">
    <h2 class="section-subtitle" style="color: var(--golden); margin-bottom: 1.5rem;">
      {{ if eq .Language.Lang "en" }}Download Membership Form{{ else }}‡≤∏‡≤¶‡≤∏‡≥ç‡≤Ø‡≤§‡≥ç‡≤µ ‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø{{ end }}
    </h2>
    <p style="color: white; font-size: 1.1rem; margin-bottom: 2rem; max-width: 700px; margin-left: auto; margin-right: auto; opacity: 0.95;">
      {{ $data.form.description }}
    </p>
    <a href="{{ $data.form.downloadUrl }}"
       class="cta-button"
       download
       style="background: var(--golden); color: var(--dark-gray); display: inline-flex; align-items: center; gap: 0.5rem; padding: 15px 40px; font-size: 1.1rem;">
      üìÑ {{ $data.form.downloadText }}
    </a>
  </section>

  <!-- Payment Methods Section -->
  <section style="margin: 4rem 0; padding: 3rem; background: var(--light-gray); border-radius: 15px;">
    <h2 class="section-subtitle" style="text-align: center; margin-bottom: 2rem;">
      {{ T "payment_methods" }}
    </h2>

    <div class="cards-grid"
      style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 1000px; margin: 0 auto 3rem;">
      {{ range $data.payment.methods }}
      <div class="card">
        <div class="card-content">
          <h3 style="color: var(--primary-green); margin-bottom: 1rem;">{{ .type }}</h3>
          <table style="width: 100%; font-size: 0.95rem;">
            {{ range .details }}
            <tr>
              <td style="padding: 0.5rem 0; color: var(--color-text-secondary); font-weight: 600;">{{ .label }}:</td>
              <td style="padding: 0.5rem 0; color: var(--text-color);">{{ .value }}</td>
            </tr>
            {{ end }}
          </table>
          {{ with .qrCode }}
          <div
            style="margin-top: 1.5rem; text-align: center; padding: 1rem; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            {{ $img := resources.Get . }}
            {{ if $img }}
            {{ $resized := $img.Resize "300x webp q90" }}
            <img src="{{ $resized.RelPermalink }}" alt="UPI QR Code"
              style="max-width: 250px; width: 100%; height: auto; border-radius: 8px;">
            {{ else }}
            <img src="{{ . }}" alt="UPI QR Code"
              style="max-width: 250px; width: 100%; height: auto; border-radius: 8px;">
            {{ end }}
          </div>
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>

    <!-- Payment Steps -->
    <div style="max-width: 800px; margin: 0 auto;">
      <h3 style="color: var(--primary-blue); margin-bottom: 1.5rem; text-align: center;">
        {{ T "how_to_join" }}
      </h3>
      <ol style="list-style: none; padding: 0;">
        {{ range $index, $step := $data.payment.steps }}
        <li style="margin-bottom: 1rem; padding-left: 3rem; position: relative;">
          <span
            style="position: absolute; left: 0; top: 0; background: var(--primary-green); color: white; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">
            {{ add $index 1 }}
          </span>
          {{ $step }}
        </li>
        {{ end }}
      </ol>
    </div>
  </section>

  <!-- Testimonials Section -->
  {{ $testimonials := index .Site.Data.testimonials .Language.Lang }}
  {{ if $testimonials }}
  <section style="margin: 4rem 0;">
    <h2 class="section-title">{{ T "what_members_say" }}</h2>
    <div class="cards-grid"
      style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1200px; margin: 0 auto;">
      {{ range first 3 $testimonials }}
      <div class="testimonial-card">
        <div class="testimonial-photo">
          {{ if .photo }}
          <img src="{{ .photo }}" alt="{{ .name }}">
          {{ else }}
          <div class="photo-placeholder">üë§</div>
          {{ end }}
        </div>
        <p class="testimonial-comment">{{ .message }}</p>
        <div class="testimonial-author">
          <strong>{{ .name }}</strong>
          <span>{{ .membershipType }}</span>
        </div>
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}

  <!-- Contact Section -->
  <section
    style="margin: 4rem 0; text-align: center; padding: 3rem; background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%); border-radius: 15px; color: white;">
    <h2 style="color: var(--golden); margin-bottom: 1rem;">{{ T "have_questions" }}</h2>
    <p style="font-size: 1.1rem; margin-bottom: 2rem; opacity: 0.95;">
      {{ T "join_community_today" }}
    </p>
    <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-bottom: 1.5rem;">
    </div>
    <a href="/{{ .Language.Lang }}/contact/"
      style="display: inline-block; padding: 15px 40px; background-color: var(--golden); color: var(--dark-gray); text-decoration: none; border-radius: 5px; font-weight: 600; font-size: 1.1rem;">{{
      T "contact_us" }}</a>
  </section>
</div>
{{ end }}